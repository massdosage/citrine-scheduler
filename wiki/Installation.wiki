#summary How to install Citrine
#labels Featured
<wiki:toc max_depth="2" />

= Installing Citrine =
These instructions cover installing Citrine for production use from a Binary Release downloaded from [http://code.google.com/p/citrine-scheduler/downloads/list here]. Unpack the .tgz file which should contain the following files:
 * citrine.war - the Citrine web application.
 * citrine-ddl-mysql.sql - SQL DDL for creating the Citrine database.
 * base_data.sql - SQL which loads various default values into Citrine.
 * citrine.properties.example - Example Citrine configuration file.
The steps below will describe how to use these files to get up and running with Citrine.

== Prerequisites ==
 # Java 6.x installed.
 # Tomcat 6.x installed to $TOMCAT_HOME.
 # !MySql 5.x installed.

== Setting up the Citrine database ==
The steps below are for !MySql (currently the only supported DB).
  # Create a database, this example will use the name "citrine" but you can call it whatever you want.
{{{
$ mysql -u USERNAME
mysql> create database citrine;
mysql> exit;
}}}
  # Load the SQL DDL file that will create the necessary tables. Change directory to the folder that the Citrene files are in.
{{{
$ mysql -u USERNAME citrine < citrine-ddl-mysql.sql
}}}
  # Load the base SQL file that will create the default admin tasks.
{{{
$ mysql -u USERNAME citrine < base_data.sql
}}}
  # If necessary create a user that can read and write from all the tables in the citrine database that will be used in production. We will assume the user is called "produser" and their password is "prodpassword".

== Configuring Citrine ==

  # Copy citrine.properties.example to somewhere on Tomcat's classpath (e.g. TOMCAT_HOME/lib/ for versions 6.02x) 
  # Rename citrine.properties.example to citrine.properties.
  # Edit citrine.properties.
  # Set the property "hibernate.connection.url" and set the host, port and database name that you added above. 
{{{
jdbc:mysql://127.0.0.1:3306/citrine?jdbcCompliantTruncation=false
}}}
  # Set the property "hibernate.connection.username" to the username you added above.
  # Set the property "hibernate.connection.password" to the password you added above.
  # Set the property "sysexec.logpath" to TOMCAT_HOME/webapps/citrine/logs (replace TOMCAT_HOME with the *full* path to wherever you installed Tomcat).

Above is the bare minimum configuration changes needed to get up and running with Citrine. For more information see [Configuration].

== Starting Citrine ==
  # Start Tomcat.
  # Copy citrine.war to TOMCAT_HOME/webapps
  # Go to http://localhost:8080/citrine/ in a browser and you should see the Citrine home page.

== Troubleshooting ==
The first place to look for errors is in the log files under TOMCAT_HOME/logs/. Usually errors will be in a file called catalina.out, but depending on where in the process things went wrong various other files in the logs folder might contain clues.
 * If the logs contain a stack trace complaining about "hibernate dialect must be explicitly set" look higher up in trace for the actual cause which 9 times out of 10 is  a database authentication issue (e.g. wrong user name or password).